<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: helpers/Logger.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: helpers/Logger.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Class to create an object that used to save and retrieves logs.
 * @type {object}
 * @constructor
 * @public
 * @property {object} LogsViewer - Holds an instance of the RightView class.
 */
class Logger {
  /**
   *Contains all the consumed things with their id as a key.
   * @type {object}
   * @property {ConsumedThing} - Holds an instance of the RightView class.
   */
  #LogsViewer;
  set LogsViewer(LogsViewer) {
    this.#LogsViewer = LogsViewer;
  }
  /**
   * Initiate a logs object at the local storage.
   * @type {Function}
   * @param {string} id - The id of a Thing
   * @param {object} td - The Thing Description of a Thing.
   * @returns {void}
   */
  initiate(id, td) {
    if (!JSON.parse(localStorage.getItem(id)) === null) return undefined;
    localStorage.setItem(
      id,
      JSON.stringify({
        td,
        invokeAction: {},
        readProperty: {},
        readAllProperties: {},
        readMultipleProperties: {},
        observeProperty: {},
        unobserveProperty: {},
        subscribeEvent: {},
        unsubscribeEvent: {},
        writeProperty: {},
        writeAllProperties: {},
        writeMultipleProperties: {},
      })
    );
  }
  /**
   * Saves a log Request object at the local storage and sends it to the RightView.
   * @type {Function}
   * @param {string} affordance - The id of a Thing
   * @param {string} interactionAffordance - The id of a Thing
   * @param {boolean | null | undefined | number | string | object} data - The id of a Thing
   * @param {undefined | object} uriVariables - The uriVariables of a request.
   * @param {string} id - The id of a request.
   * @param {string} requestDate - The date of a request.
   * @returns {void}
   */
  saveRequest(
    affordance,
    interactionAffordance,
    data,
    uriVariables,
    id,
    requestDate
  ) {
    const logs = JSON.parse(localStorage.getItem(id));
    const request = {
      date: requestDate,
      interactionAffordance,
      data,
      uriVariables,
      type: affordance,
    };
    logs[affordance][requestDate] = { request };
    localStorage.setItem(id, JSON.stringify(logs));
    this.#LogsViewer.appendRequestToView(logs.td.title, request);
  }
  /**
   * Saves a log response object at the local storage and sends it to the RightView.
   * @type {Function}
   * @param {string} affordance - The id of a Thing
   * @param {string} interactionAffordance - The id of a Thing
   * @param {boolean | null | undefined | number | string | object} data - The id of a Thing
   * @param {undefined | object} uriVariables - The uriVariables of a request.
   * @param {string} id - The id of a request.
   * @param {string} requestDate - The date of a request.
   * @param {string} responseDate - The date of a response.
   * @param {string} status - The status of a request.
   * @returns {void}
   */
  saveResponse(
    affordance,
    interactionAffordance,
    data,
    uriVariables,
    id,
    requestDate,
    responseDate,
    status
  ) {
    const logs = JSON.parse(localStorage.getItem(id));
    const response = {
      type: affordance,
      interactionAffordance,
      date: responseDate,
      uriVariables,
      status,
      data,
    };
    logs[affordance][requestDate].response = { response };
    this.#LogsViewer.appendResponseToView(
      logs.td.title,
      response,
      logs[affordance][requestDate].request
    );
    logs[affordance][requestDate].response = { ...response };
    localStorage.setItem(id, JSON.stringify(logs));
  }
}

export default Logger;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Logger.html">Logger</a></li><li><a href="Navbar.html">Navbar</a></li><li><a href="Settings.html">Settings</a></li><li><a href="ThingsController.html">ThingsController</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Mon May 23 2022 10:42:46 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
