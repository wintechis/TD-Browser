<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/Settings.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/Settings.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import sound from "../../../assets/sound.mp3";

import $ from "jquery";
/**
 * Class to create an object that manages the app settings.
 * @type {object}
 * @constructor
 * @public
 * @property {object} LogsViewer - Holds an instance of the RightView class.
 */
class Settings {
  get htmlElement() {
    return this.#htmlElement();
  }
  get getArraySeparator() {
    return JSON.parse(localStorage.getItem("settings")).arraySeparator;
  }
  /**
   * Generates an HTML form for the settings.
   * @type {Function}
   * @returns {object} - returns an HTML
   */
  generateSettingsForm() {
    let defaultSettings = JSON.parse(localStorage.getItem("settings"));
    if (defaultSettings === null) {
      defaultSettings = {
        notificationSound: true,
        logs: "all",
        theme: "default",
        arraySeparator: ",",
      };
      localStorage.setItem("settings", JSON.stringify(defaultSettings));
    }
    return `
      &lt;form id="settingsForm">
      &lt;div>
        &lt;label class="form-check-label" for="notificationSound">Notification Sound&lt;/label> 
        &lt;div class="form-check form-switch">
          &lt;input class="form-check-input" type="checkbox" role="switch" id="notificationSound" ${
            defaultSettings.notificationSound ? "checked" : ""
          }>
          &lt;/div>
          &lt;/div>
        &lt;label class="form-select-label" for="settings-Logs">logs&lt;/label>
        &lt;select id="settings-logs" class="form-select" aria-label="">
          &lt;option 
            ${defaultSettings.logs === "onlyNotifications" ? "selected" : ""} 
            value="onlyNotifications">Only Notifications
          &lt;/option>
          &lt;option 
          ${
            defaultSettings.logs === "all" ? "selected" : ""
          }  value="all">All&lt;/option>
        &lt;/select>
  &lt;/div>`;
  }
  /**
   * Appends the HTML settings form.
   * @type {Function}
   * @returns {void}
   */
  appendSettingsForm() {
    $("#settingsForm").remove();
    $("#settings-form-container").append(this.generateSettingsForm());
  }
  /**
   * Saves new settings to the local storage.
   * @type {Function}
   * @returns {void}
   */
  saveSettings() {
    const settings = {
      notificationSound: $("#notificationSound").is(":checked"),
      logs: $("#settings-logs").val(),
      theme: $("#settings-theme").val(),
      arraySeparator: $("#settings-arraySeparator").val(),
    };
    localStorage.setItem("settings", JSON.stringify({ ...settings }));
    this.appendSettingsForm();
    this.applySettings();
  }
  /**
   * Applying settings on the app.
   * @type {Function}
   * @returns {void}
   */
  applySettings() {
    let defaultSettings = {
      notificationSound: true,
      logs: "onlyNotifications",
      theme: "default",
    };
    let settings =
      JSON.parse(localStorage.getItem("settings")) || defaultSettings;
    let selectedElements =
      ".card-request, .card-response-invokeAction, .card-response-readProperty, .card-response-writeProperty, .card-response-readAllProperties, .card-response-readMultipleProperties, .card-response-writeAllProperties, .card-response-writeMultipleProperties";
    if (settings.logs === "onlyNotifications") {
      $(selectedElements).hide();
    } else {
      $(selectedElements).show();
    }
    document
      .getElementsByTagName("body")[0]
      .setAttribute("data-theme", settings.theme);
  }
  /**
   * Returns true if the sound is on and returns false if the sound is off.
   * @type {Function}
   * @returns {boolean}
   */
  isNotificationSoundOn() {
    return JSON.parse(localStorage.getItem("settings")).notificationSound;
  }
  /**
   * Play sound.
   * @type {Function}
   * @returns {void}
   */
  playSound() {
    this.isNotificationSoundOn() &amp;&amp;
      document.getElementById("notificationAudio").play();
  }
  /**
   * Returns HTML settings as a string.
   * @type {Function}
   * @returns {string}
   */
  #htmlElement() {
    this.applySettings();
    return `
    &lt;div id="settingsIcon" class="bi-gear" data-bs-toggle="modal" data-bs-target="#settingsModal" >&lt;/div>
    &lt;div class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
    &lt;div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
      &lt;div class="modal-content">
        &lt;div class="modal-header">
          &lt;h5 class="modal-title" id="settingsModalLabel">Settings&lt;/h5>
        &lt;/div>
        &lt;div class="modal-body">
        &lt;audio id="notificationAudio" >
        &lt;source src="${sound}">&lt;/source>
      &lt;/audio>
        &lt;div id="settings-form-container" class="row  align-items-center">
        ${this.generateSettingsForm()}
        &lt;/div>
        &lt;div class="modal-footer">
          &lt;button type="button" id="settings-form-close" class="btn btn-secondary" data-bs-dismiss="modal">Close&lt;/button>
          &lt;button type="button" id="settings-form-save" class="btn btn-primary" data-bs-dismiss="modal">Save&lt;/button>
        &lt;/div>
      &lt;/div>
    &lt;/div>
  &lt;/div>`;
  }
}

export default new Settings();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Logger.html">Logger</a></li><li><a href="Navbar.html">Navbar</a></li><li><a href="Settings.html">Settings</a></li><li><a href="ThingsController.html">ThingsController</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-Tutorials.html">Tutorials</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Mon May 23 2022 15:41:18 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
